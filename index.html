<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>逃脫迷宮 - 主選單</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="./HomePage/style2.css" />
</head>

<body>
  <h1>迷宮冒險</h1>

  <button class="menu-btn" onclick="startGame()">開始遊戲</button>
  <button class="menu-btn" data-sound="click" data-jump="./HomePage/instructions.html">遊戲說明</button>

  <script type="module">
    import SoundManager from './Game/js/soundManager.js';

    SoundManager.load('click', './Game/audio/select-sound-fixed-extended.mp3', 0.8);

    window.startGame = function () {
      SoundManager.play('click', { single: true, cooldown: 500 });

      const dummy = new Audio('./Game/audio/retro-game-music(gameMusic).mp3');
      dummy.volume = 0;
      dummy.play().then(() => {
        dummy.pause();
        const time = Date.now();
        setTimeout(() => {
          window.location.href = `./Game/Level_1.html?start=${time}`;
        }, 280);
      }).catch(err => {
        console.warn('無法預播放 BGM', err);
        alert("瀏覽器阻擋了音效播放，請點擊畫面再試一次");
      });
    };

    SoundManager.autoBind(280);
  </script>
</body>
</html>

